<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BugFlow.Pages.Raport.RaportPage"
             Title="Raport"
             BackgroundColor="{StaticResource PageBackground}">

    <Grid>
        <ActivityIndicator x:Name="loadingIndicator"
                           IsRunning="False" IsVisible="False"
                           Color="{StaticResource Primary}"
                           VerticalOptions="Center" HorizontalOptions="Center"
                           HeightRequest="50" WidthRequest="50" />

        <ScrollView x:Name="content" Padding="16" IsVisible="False">
            <VerticalStackLayout Spacing="16">

                <Frame Padding="20" CornerRadius="16" BackgroundColor="{StaticResource Primary}"
                       BorderColor="Transparent" HasShadow="True">
                    <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                        <Label Text="Total issue-uri" FontSize="14" TextColor="#BBDEFB"
                               HorizontalTextAlignment="Center" />
                        <Label x:Name="totalLabel" Text="0" FontSize="42" FontAttributes="Bold"
                               TextColor="White" HorizontalTextAlignment="Center" />
                    </VerticalStackLayout>
                </Frame>

                <Label Text="Distributie pe stare" FontSize="18" FontAttributes="Bold"
                       TextColor="{StaticResource Gray900}" Margin="4,0,0,0" />

                <CollectionView x:Name="statusCollection">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Margin="0,4" Padding="0" CornerRadius="12"
                                   BackgroundColor="{StaticResource CardBackground}"
                                   BorderColor="Transparent" HasShadow="True">
                                <Grid Padding="16,14" ColumnDefinitions="Auto, *, Auto" ColumnSpacing="14">
                                    <BoxView WidthRequest="6" CornerRadius="3"
                                             Color="{Binding Culoare}"
                                             VerticalOptions="Fill" />
                                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                        <Label Text="{Binding StatusNume}" FontSize="16" FontAttributes="Bold"
                                               TextColor="{StaticResource Gray900}" />
                                        <Label Text="{Binding CountText}"
                                               FontSize="13" TextColor="{StaticResource Gray500}" />
                                    </VerticalStackLayout>
                                    <Frame Grid.Column="2" Padding="14,8" CornerRadius="14"
                                           BackgroundColor="{Binding Culoare}" BorderColor="Transparent"
                                           VerticalOptions="Center">
                                        <Label Text="{Binding Procent, StringFormat='{0}%'}"
                                               FontSize="14" FontAttributes="Bold" TextColor="White" />
                                    </Frame>
                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Label Text="Distributie pe prioritate" FontSize="18" FontAttributes="Bold"
                       TextColor="{StaticResource Gray900}" Margin="4,8,0,0" />

                <CollectionView x:Name="priorityCollection">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Margin="0,4" Padding="0" CornerRadius="12"
                                   BackgroundColor="{StaticResource CardBackground}"
                                   BorderColor="Transparent" HasShadow="True">
                                <Grid Padding="16,14" ColumnDefinitions="Auto, *, Auto" ColumnSpacing="14">
                                    <BoxView WidthRequest="6" CornerRadius="3"
                                             Color="{Binding Culoare}"
                                             VerticalOptions="Fill" />
                                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                        <Label Text="{Binding StatusNume}" FontSize="16" FontAttributes="Bold"
                                               TextColor="{StaticResource Gray900}" />
                                        <Label Text="{Binding CountText}"
                                               FontSize="13" TextColor="{StaticResource Gray500}" />
                                    </VerticalStackLayout>
                                    <Frame Grid.Column="2" Padding="14,8" CornerRadius="14"
                                           BackgroundColor="{Binding Culoare}" BorderColor="Transparent"
                                           VerticalOptions="Center">
                                        <Label Text="{Binding Count}" FontSize="14" FontAttributes="Bold" TextColor="White" />
                                    </Frame>
                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
